#!/usr/bin/env ruby

# basic git config
%x[ git config --global user.name 'Olivier Lacan' ]
%x[ git config --global user.email hi@olivierlacan.com ]
%x[ git config --global push.default simple ]

# setup git to use osxkeychain as the credential helper so 
# that it remembers GitHub credentials
%x[ git config --global credential.helper osxkeychain ]

puts("Press Enter to continue...") 
if %x[ git credential-osxkeychain get github.com ]
  puts "git is now authorized to look stuff up from Keychain!"
else
  puts "something went to shit!"
end

%x[ ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" /usr/local/bin/sublime ]

# RubyGems
%x[ gem update --system ]
%x[ echo 'gem: --no-document' >> ~/.gemrc ]

# Bundler
cores = (%x[ sysctl -n hw.ncpu ].to_i) - 1
%x[ bundle config --global jobs #{cores} ]

private 

def s(arguments)
	system(arguments)
end